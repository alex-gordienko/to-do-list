'use client'
import { Box, Checkbox, IconButton, Paper, styled, Typography } from "@mui/material"
import DeleteIcon from '@mui/icons-material/Delete';
import { useState } from "react";
import { useRouter } from "next/navigation";

interface CardProps { 
  id: number
  title: string
  color: string
  status: 'inProgress' | 'done'
  createdAt: string
  onDoneClicked: (id: number) => void
  onDeleteClicked: (id: number) => void
}

const Card = ({ id, title, color, status, onDoneClicked, onDeleteClicked, createdAt }: CardProps) => { 
  const router = useRouter();
  const [isChecked, setIsChecked] = useState(status === 'done');

  const handleCheckboxClick = () => {
    setIsChecked(!isChecked);
    onDoneClicked(id);
  };

  const customCheckbox = () => {
    return (
      <div onClick={handleCheckboxClick} className="cursor-pointer">
        {isChecked ? (
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.98019 16.4262C13.0728 16.4262 16.3904 13.1085 16.3904 9.01594C16.3904 4.92338 13.0728 1.6057 8.98019 1.6057C4.88763 1.6057 1.56995 4.92338 1.56995 9.01594C1.56995 13.1085 4.88763 16.4262 8.98019 16.4262Z" fill="#5E60CE"/>
            <path d="M8.96428 1.85958C10.3765 1.85958 11.7571 2.27836 12.9313 3.06297C14.1056 3.84758 15.0208 4.96277 15.5612 6.26752C16.1017 7.57228 16.2431 9.00799 15.9676 10.3931C15.6921 11.7782 15.012 13.0505 14.0134 14.0492C13.0148 15.0478 11.7424 15.7278 10.3573 16.0034C8.9722 16.2789 7.53648 16.1375 6.23173 15.597C4.92697 15.0566 3.81178 14.1414 3.02717 12.9671C2.24257 11.7929 1.82378 10.4123 1.82378 9.00007C1.8311 7.10855 2.58574 5.29658 3.92326 3.95906C5.26079 2.62154 7.07275 1.86689 8.96428 1.85958ZM8.96428 0.272801C7.23972 0.279856 5.55592 0.797692 4.12543 1.76094C2.69494 2.72418 1.58191 4.08965 0.926831 5.68495C0.271755 7.28026 0.104012 9.03389 0.444777 10.7245C0.785541 12.415 1.61954 13.9667 2.84148 15.1837C4.06342 16.4007 5.61852 17.2283 7.31046 17.5622C9.00241 17.896 10.7553 17.7211 12.348 17.0595C13.9406 16.398 15.3015 15.2794 16.2589 13.845C17.2163 12.4105 17.7272 10.7246 17.7273 9.00007C17.7273 7.85098 17.5003 6.7132 17.0595 5.65202C16.6187 4.59085 15.9727 3.62717 15.1585 2.8163C14.3443 2.00543 13.378 1.36333 12.315 0.92685C11.2521 0.490368 10.1134 0.2681 8.96428 0.272801Z" fill="#5E60CE"/>
            <path d="M12.4307 6.34214L8.09877 10.6741L5.6163 8.19161L4.7804 9.02751L8.09877 12.3459L13.2666 7.17804L12.4307 6.34214Z" fill="#F2F2F2"/>
          </svg>
        ) : (
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.96428 1.85958C10.3765 1.85958 11.7571 2.27836 12.9313 3.06297C14.1056 3.84757 15.0208 4.96277 15.5612 6.26752C16.1017 7.57228 16.2431 9.00799 15.9676 10.3931C15.6921 11.7782 15.012 13.0505 14.0134 14.0492C13.0148 15.0478 11.7424 15.7278 10.3573 16.0034C8.9722 16.2789 7.53648 16.1375 6.23173 15.597C4.92697 15.0566 3.81178 14.1414 3.02717 12.9671C2.24257 11.7929 1.82378 10.4123 1.82378 9.00007C1.8311 7.10855 2.58574 5.29658 3.92326 3.95906C5.26079 2.62154 7.07275 1.86689 8.96428 1.85958ZM8.96428 0.2728C7.23972 0.279855 5.55592 0.797691 4.12543 1.76093C2.69494 2.72418 1.58191 4.08964 0.926831 5.68495C0.271755 7.28026 0.104012 9.03389 0.444777 10.7245C0.785541 12.415 1.61954 13.9667 2.84148 15.1837C4.06342 16.4007 5.61852 17.2283 7.31046 17.5622C9.00241 17.896 10.7553 17.7211 12.348 17.0595C13.9406 16.398 15.3015 15.2794 16.2589 13.845C17.2163 12.4105 17.7272 10.7246 17.7273 9.00007C17.7273 7.85098 17.5003 6.7132 17.0595 5.65202C16.6187 4.59085 15.9727 3.62717 15.1585 2.8163C14.3443 2.00543 13.378 1.36333 12.315 0.926849C11.2521 0.490367 10.1134 0.268099 8.96428 0.2728Z" fill="#4EA8DE"/>
          </svg>
        )}
      </div>
    )
  }

  return (
    <div className={`p-[1.4rem] bg-[${color}1A] flex flex-row my-2 p-3 rounded-xl border-1 items-center`}>
      {customCheckbox()}
      <p className={`ml-2 ${status === 'done' ? 'text-gray-400 line-through' : 'text-white'}`}>
        {title}
      </p>
      <div className="ml-auto">
        <button onClick={() => router.replace(`/edit/${id}`)} aria-label="delete" className="text-gray-500 hover:text-gray-700 mr-2">
          <svg width="13" height="14" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
        </button>
        <button onClick={() => onDeleteClicked(id)} aria-label="delete" className="text-gray-500 hover:text-gray-700">
          <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.20211 4.98547H6.87155V10.5073H8.20211V4.98547Z" fill="#808080"/>
            <path d="M5.46233 4.98547H4.13177V10.5073H5.46233V4.98547Z" fill="#808080"/>
            <path d="M12.478 2.16712C12.4754 2.03061 12.4295 1.89846 12.3469 1.78975C12.2642 1.68104 12.1492 1.6014 12.0184 1.56232C11.9596 1.53782 11.8974 1.52252 11.8339 1.51696H8.28678C8.1525 1.07791 7.88082 0.693554 7.51174 0.420471C7.14265 0.147388 6.69564 0 6.23651 0C5.77738 0 5.33038 0.147388 4.96129 0.420471C4.5922 0.693554 4.32053 1.07791 4.18625 1.51696H0.639107C0.580679 1.51814 0.522686 1.52729 0.46674 1.54418H0.45162C0.313182 1.58701 0.193338 1.67547 0.11163 1.79515C0.0299214 1.91483 -0.00883041 2.05866 0.00169348 2.20319C0.0122174 2.34771 0.071396 2.48441 0.169579 2.59099C0.267763 2.69757 0.399158 2.76774 0.542339 2.79006L1.25298 12.5334C1.26382 12.9127 1.41693 13.2741 1.68191 13.5458C1.94688 13.8175 2.30435 13.9797 2.68332 14H9.78668C10.1662 13.9804 10.5244 13.8186 10.79 13.5468C11.0556 13.2751 11.2092 12.9132 11.22 12.5334L11.9277 2.79914C12.0802 2.77797 12.22 2.70232 12.3212 2.58615C12.4223 2.46999 12.478 2.32116 12.478 2.16712ZM6.23651 1.21456C6.3661 1.21458 6.49427 1.24146 6.61294 1.29351C6.73161 1.34556 6.8382 1.42164 6.92598 1.51696H5.54704C5.63459 1.42135 5.74114 1.34507 5.85986 1.29299C5.97859 1.24092 6.10687 1.21421 6.23651 1.21456ZM9.78668 12.7904H2.68332C2.60168 12.7904 2.47467 12.6573 2.45955 12.4457L1.75798 2.81123H10.715L10.0135 12.4457C9.99836 12.6573 9.87135 12.7904 9.78668 12.7904Z" fill="#808080"/>
          </svg>
        </button>
      </div>
    </div>
  )
}

export default Card